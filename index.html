<!DOCTYPE html>
<html>
    <head>
        <script src="./cells.js"></script>
        <meta charset="utf-8" />
    </head>
    <body>
        <div class="canvas-port">
            <canvas
                class="canvas"
                width="500"
                height="500">
            </canvas>
        </div>
        <button
            type="button"
            class="canvas-control">
            ON/OFF
        </button>
    </body>
    <script>
        window.addEventListener('DOMContentLoaded', () => {
            const testCells = new CellField(500, 500)
            const DELTA = 55
            const toggle = document.querySelector('.canvas-control')
            let halt = false

            testCells
                .setContext(document.querySelector('canvas'))
                .setPalette([
                    '#000',
                    '#08d',
                    '#0ac',
                    '#0b7'])
                .setBGColor('#000')
                .seed(0.045)

            const setupInterval = () => {
                let graphInterval = setInterval(() => {
                    testCells.step()
                    testCells.visualize()
                    if(halt) {
                        clearInterval(graphInterval)
                    }
                }, DELTA)

                return graphInterval
            }

            setupInterval()

            toggle.addEventListener('click', () => {
                if(!halt) {
                    halt = true
                } else {
                    halt = false
                    setupInterval()
                }
            })
        })
    </script>
</html>